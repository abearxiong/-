---
layout: post
title: volatile是什么 
date: 2019-08-14 09:39:07 +0800 
categories: java 
tags: ["多线程", "java"]
notebook: java
comments: false
description: 关于volatile的简单介绍。内存的可见性，线程共享变量的不可见性。
---
关于内存的可见性，如果单纯的使用线程，会出现线程间的共享变量是不可见的，所以共享数据其中一个线程变了，但是显示是不能够的显示的。每一个线程都有独立的一个缓存进行提高效率，但是为了让线程中的共享数据的显示，需要有其他解决办法。

如果加锁是可以解决问题的，但是会出现消耗，而对线程中的共享变量使用volatile的关键字会使得变量共享可见。

volatile保证了不同的线程对这个变量进行操作时的可见性，即一个线程修改对其他线程来说是立即可见的。禁止进行指令重排序。

volatile无法保证对变量操作的原子性，不具有互斥性。

轻量级的内容原子性

## 什么是内存的不可见性

当多个线程操作共享数据时，彼此不可见。

同步锁是每次刷新缓存，效率低。多个线程访问的话，会出现多个线程判断，阻塞问题。


## cas算法保证原子性

AtomicInteger s = new AtomicInteger();

s.getAndIncrement();//或者其他
