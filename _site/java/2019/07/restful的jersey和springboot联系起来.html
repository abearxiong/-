<!DOCTYPE html>
<html lang="zh">
  <head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>restful的jersey和springboot联系起来 | Abear</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="restful的jersey和springboot联系起来" />
<meta name="author" content="abearxiong" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="一般使用restful是用springboot中直接@RestConstroller，但是上一次想学习JSR311去了解的这一个jersey，想去具体实现一下这个功能特点，所以去学习。环境搭建的时候因为JAX-RS1.0和JAX-RS2.0出现了问题（可能），所以记录一下过程。实际是扫描包的问题。" />
<meta property="og:description" content="一般使用restful是用springboot中直接@RestConstroller，但是上一次想学习JSR311去了解的这一个jersey，想去具体实现一下这个功能特点，所以去学习。环境搭建的时候因为JAX-RS1.0和JAX-RS2.0出现了问题（可能），所以记录一下过程。实际是扫描包的问题。" />
<link rel="canonical" href="http://0.0.0.0:4000/java/2019/07/restful%E7%9A%84jersey%E5%92%8Cspringboot%E8%81%94%E7%B3%BB%E8%B5%B7%E6%9D%A5.html" />
<meta property="og:url" content="http://0.0.0.0:4000/java/2019/07/restful%E7%9A%84jersey%E5%92%8Cspringboot%E8%81%94%E7%B3%BB%E8%B5%B7%E6%9D%A5.html" />
<meta property="og:site_name" content="Abear" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-07-06T08:03:09+08:00" />
<script type="application/ld+json">
{"description":"一般使用restful是用springboot中直接@RestConstroller，但是上一次想学习JSR311去了解的这一个jersey，想去具体实现一下这个功能特点，所以去学习。环境搭建的时候因为JAX-RS1.0和JAX-RS2.0出现了问题（可能），所以记录一下过程。实际是扫描包的问题。","@type":"BlogPosting","url":"http://0.0.0.0:4000/java/2019/07/restful%E7%9A%84jersey%E5%92%8Cspringboot%E8%81%94%E7%B3%BB%E8%B5%B7%E6%9D%A5.html","dateModified":"2019-07-06T08:03:09+08:00","datePublished":"2019-07-06T08:03:09+08:00","headline":"restful的jersey和springboot联系起来","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/java/2019/07/restful%E7%9A%84jersey%E5%92%8Cspringboot%E8%81%94%E7%B3%BB%E8%B5%B7%E6%9D%A5.html"},"author":{"@type":"Person","name":"abearxiong"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- cdn -->  <!-- bootstrap -->
<link href="https://cdn.bootcss.com/twitter-bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="Abear" />
  </head>
  <body>  <div class="header-wraper">
      <header class="Header">
        <div class="Header-item">
          <a class="Header-link" href="/">
            <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
          </a>
        </div>
        <div class="Header-item"><input type="text"  /></div>
        <div class="Header-item">
          <a class="Header-link" href="/article">文章</a>
          <a class="Header-link" href="/xx-space">空间</a>
          <a class="Header-link" href="/draft">草稿</a>
          <a class="Header-link" href="/project">计划</a>
          <a class="Header-link" href="/feed.xml">RSS</a>
          <a class="Header-link" href="/lolChessHelper/">L自走棋</a>
        </div>
      </header>
  </div><div class="container">
      <div class="home">
  <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <header class="post-header">
      <h1 class="post-title p-name" itemprop="name headline">restful的jersey和springboot联系起来</h1>
      <p class="post-meta">
        <time class="dt-published" datetime="2019-07-06T08:03:09+08:00" itemprop="datePublished">Jul 6, 2019
        </time></p>
    </header>

    <div class="post-content e-content" itemprop="articleBody">
      <p>因为第一次搭建的时候我引入了我想可能会用到的包，使用maven把所有的包引入，然后根据配置和使用，发现访问那个resource的url会出现报错，报错的大概内容就是servlet的init初始化错误。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP Status 500 - Servlet.init() for servlet jersey-serlvet threw exception?
</code></pre></div></div>

<p>之前一直以为是配置错误，所以我一直寻找资料去配置。</p>

<p>可能是思维没有想起来，查找了几个小时才想到，我的配置方式是没有问题的，那么是其他的地方出了问题，而我的编辑器也是没有问题的，springboot也是没有问题的，所以为什么会出现这个问题？因此我就想到，单独配置这么一个jersey服务进行测试。</p>

<p>之前查找资料的时候遇到过，如果JAX-RS1.0和JAX-RS2.0如果都有的话，那么会导致兼容什么类的问题的，但是我在网站上是没有看到那个包的，我引入的那些包是不是可能就引入了JAX-RS1.0,因为springboot jersey start默认的版本是JAX-RS2.0,所以是那个包引入了，我是不知道的，但是因为之前了解过两个都有会出问题，其他的配置的地方都是对的，所以我就单独的配置了一次的jersey。只引入jersey一个包，然后springboot启动，查看资源，结果成功了。</p>

<p>在那一刻的我心情很复杂，又是花了很长的时间去解决一个问题。</p>

<p>世界上很多的内容都是在网络上查找资料的，解决问题。搜索能力是一个解决方式，查看文档是一个方式，思维需要更跳跃，跳过一些模板框架，需要更快的去找到出现问题的根本点，然后才能解决问题的。</p>

<p>通过这个解决思路，我判断以后的解决思考，在实现解决的过程当中，如何更快的去找到更便捷的方式方法。</p>

<ul>
  <li>08：30</li>
</ul>

<h2 id="是哪个包">是哪个包？</h2>

<p>引入的包那么多，到底是哪个包呢？所以我想去验证和查找一下，然后我原始的引入一个一个注释，还是那个问题？把我后面测试的jersey代码，只引入一个并成功的代码复制进去之前引入多个的，是可以成功的。所以我就发现，我的代码是有问题的！</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">me</span><span class="p">.</span><span class="n">xiongxiao</span><span class="p">.</span><span class="n">life</span><span class="p">.</span><span class="n">plan</span><span class="p">.</span><span class="n">resources</span><span class="p">;</span>

<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">HashMap</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Map</span><span class="p">;</span>

<span class="n">import</span> <span class="n">javax</span><span class="p">.</span><span class="n">ws</span><span class="p">.</span><span class="n">rs</span><span class="p">.</span><span class="n">GET</span><span class="p">;</span>
<span class="n">import</span> <span class="n">javax</span><span class="p">.</span><span class="n">ws</span><span class="p">.</span><span class="n">rs</span><span class="p">.</span><span class="n">Path</span><span class="p">;</span>
<span class="n">import</span> <span class="n">javax</span><span class="p">.</span><span class="n">ws</span><span class="p">.</span><span class="n">rs</span><span class="p">.</span><span class="n">Produces</span><span class="p">;</span>
<span class="n">import</span> <span class="n">javax</span><span class="p">.</span><span class="n">ws</span><span class="p">.</span><span class="n">rs</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">MediaType</span><span class="p">;</span>

<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">stereotype</span><span class="p">.</span><span class="n">Component</span><span class="p">;</span>

<span class="p">//@</span><span class="n">Path</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span>
<span class="p">@</span><span class="n">Component</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">JerseyTest</span> <span class="p">{</span>
    <span class="p">@</span><span class="n">GET</span>
    <span class="p">@</span><span class="n">Produces</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="n">APPLICATION_JSON</span><span class="p">)</span>
    <span class="p">@</span><span class="n">Path</span><span class="p">(</span><span class="s2">"/hello"</span><span class="p">)</span>
    <span class="k">public</span> <span class="n">Map</span><span class="p">&lt;</span><span class="k">String</span><span class="p">,</span> <span class="n">Object</span><span class="p">&gt;</span> <span class="n">hello</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Map</span><span class="p">&lt;</span><span class="k">String</span><span class="p">,</span> <span class="n">Object</span><span class="p">&gt;</span> <span class="n">map</span> <span class="p">=</span> <span class="n">new</span> <span class="n">HashMap</span><span class="p">&lt;</span><span class="k">String</span><span class="p">,</span> <span class="n">Object</span><span class="p">&gt;();</span>
        <span class="n">map</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="s2">"code"</span><span class="p">,</span> <span class="s2">"1"</span><span class="p">);</span>
        <span class="n">map</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="s2">"codeMsg"</span><span class="p">,</span> <span class="s2">"success"</span><span class="p">);</span>
        <span class="n">return</span> <span class="n">map</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>需要把@Path 放在类的上面，必须要有，如果没有会出找不到类的错。</p>

<p>出现servlet的错</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Component
//@ApplicationPath("/")
public class JerseyConfig extends ResourceConfig{
    public JerseyConfig() {
//        register(SpringbootResource.class);
//        register(RequestContextFilter.class);
//        packages("me.xiongxiao.life.plan.resources");
        register(JerseyTest.class);
        //配置restful package.
    }
}
</code></pre></div></div>

<h2 id="由此推断是扫描路径导致的servlet的错误的如何去实现一个正确的扫描路径呢">由此推断，是扫描路径导致的servlet的错误的，如何去实现一个正确的扫描路径呢？</h2>

<h2 id="找到一个有效扫面那个包的内容然后装载">找到一个有效，扫面那个包的内容，然后装载。</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">me</span><span class="p">.</span><span class="n">xiongxiao</span><span class="p">.</span><span class="n">life</span><span class="p">.</span><span class="n">plan</span><span class="p">.</span><span class="n">config</span><span class="p">;</span>

<span class="n">import</span> <span class="n">me</span><span class="p">.</span><span class="n">xiongxiao</span><span class="p">.</span><span class="n">life</span><span class="p">.</span><span class="n">plan</span><span class="p">.</span><span class="n">resources</span><span class="p">.</span><span class="n">JerseyTest</span><span class="p">;</span>
<span class="n">import</span> <span class="n">me</span><span class="p">.</span><span class="n">xiongxiao</span><span class="p">.</span><span class="n">life</span><span class="p">.</span><span class="n">plan</span><span class="p">.</span><span class="n">resources</span><span class="p">.</span><span class="n">SpringbootResource</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">glassfish</span><span class="p">.</span><span class="n">jersey</span><span class="p">.</span><span class="n">logging</span><span class="p">.</span><span class="n">LoggingFeature</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">glassfish</span><span class="p">.</span><span class="n">jersey</span><span class="p">.</span><span class="n">server</span><span class="p">.</span><span class="n">ResourceConfig</span><span class="p">;</span>
<span class="p">//</span><span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">glassfish</span><span class="p">.</span><span class="n">jersey</span><span class="p">.</span><span class="n">server</span><span class="p">.</span><span class="k">model</span><span class="p">.</span><span class="n">Resource</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">glassfish</span><span class="p">.</span><span class="n">jersey</span><span class="p">.</span><span class="n">server</span><span class="p">.</span><span class="n">spring</span><span class="p">.</span><span class="n">scope</span><span class="p">.</span><span class="n">RequestContextFilter</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">Resource</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">support</span><span class="p">.</span><span class="n">PathMatchingResourcePatternResolver</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">support</span><span class="p">.</span><span class="n">ResourcePatternResolver</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">type</span><span class="p">.</span><span class="n">classreading</span><span class="p">.</span><span class="n">CachingMetadataReaderFactory</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">type</span><span class="p">.</span><span class="n">classreading</span><span class="p">.</span><span class="n">MetadataReader</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">stereotype</span><span class="p">.</span><span class="n">Component</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">ClassUtils</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">bind</span><span class="p">.</span><span class="n">annotation</span><span class="p">.</span><span class="n">ExceptionHandler</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">filter</span><span class="p">.</span><span class="n">CorsFilter</span><span class="p">;</span>

<span class="n">import</span> <span class="n">javax</span><span class="p">.</span><span class="n">ws</span><span class="p">.</span><span class="n">rs</span><span class="p">.</span><span class="n">ApplicationPath</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">IOException</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">HashSet</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="k">Set</span><span class="p">;</span>

<span class="p">@</span><span class="n">Component</span>
<span class="p">//@</span><span class="n">ApplicationPath</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span>
<span class="k">public</span> <span class="n">class</span> <span class="n">JerseyConfig</span> <span class="n">extends</span> <span class="n">ResourceConfig</span><span class="p">{</span>
    <span class="k">public</span> <span class="n">JerseyConfig</span><span class="p">()</span> <span class="p">{</span>
<span class="p">//</span>        <span class="n">register</span><span class="p">(</span><span class="n">SpringbootResource</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>
<span class="p">//</span>        <span class="n">packages</span><span class="p">(</span><span class="s2">"me.xiongxiao.life.plan.resources"</span><span class="p">);</span>
<span class="p">//</span>        <span class="n">register</span><span class="p">(</span><span class="n">RequestContextFilter</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>
<span class="p">//</span>        <span class="n">register</span><span class="p">(</span><span class="n">JerseyTest</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>
        <span class="n">registerClasses</span><span class="p">(</span><span class="n">findAllClasses</span><span class="p">());</span>
<span class="p">//</span>        <span class="n">packages</span><span class="p">(</span><span class="s2">"me.xiongxiao.life.plan.resources"</span><span class="p">);</span>
        <span class="p">//</span> <span class="err">注册日志</span>
        <span class="n">register</span><span class="p">(</span><span class="n">LoggingFeature</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>
        <span class="p">//</span> <span class="err">异常处理</span>
        <span class="n">register</span><span class="p">(</span><span class="n">ExceptionHandler</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>
        <span class="p">//</span> <span class="err">跨域过滤器注册</span>
        <span class="n">register</span><span class="p">(</span><span class="n">CorsFilter</span><span class="p">.</span><span class="n">class</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">/**</span>
     <span class="p">*</span> <span class="err">由于</span><span class="n">spring</span> <span class="n">boot</span> <span class="err">打包为</span><span class="n">jar</span><span class="err">包，</span><span class="n">jersey</span> <span class="n">packages</span> <span class="err">无法扫描</span><span class="n">jar</span><span class="err">对应的文件夹的文件，故自定义包扫描</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">return</span>
     <span class="p">*/</span>
    <span class="n">private</span> <span class="k">Set</span><span class="p">&lt;</span><span class="n">Class</span><span class="p">&lt;?&gt;&gt;</span> <span class="n">findAllClasses</span><span class="p">(){</span>
        <span class="k">String</span> <span class="n">scanPackages</span> <span class="p">=</span> <span class="s2">"me.xiongxiao.life.plan.*"</span><span class="p">;</span>
        <span class="n">ClassLoader</span> <span class="n">loader</span> <span class="p">=</span> <span class="n">this</span><span class="p">.</span><span class="nf">getClass</span><span class="p">().</span><span class="n">getClassLoader</span><span class="p">();</span>
        <span class="n">Resource</span><span class="p">[]</span> <span class="n">resources</span> <span class="p">=</span> <span class="n">new</span> <span class="n">Resource</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
        <span class="n">try</span> <span class="p">{</span>
            <span class="n">resources</span> <span class="p">=</span> <span class="n">scan</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">scanPackages</span><span class="p">);</span>
        <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
<span class="p">//</span>            <span class="nb">log</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="s2">"加载class异常"</span><span class="p">,</span><span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">return</span> <span class="n">convert</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">resources</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="p">/**</span>
     <span class="p">*</span> <span class="err">扫描</span> <span class="n">jar</span> <span class="err">包</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">param</span> <span class="n">loader</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">param</span> <span class="n">packageName</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">return</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">throws</span> <span class="n">IOException</span>
     <span class="p">*/</span>
    <span class="n">private</span> <span class="n">Resource</span><span class="p">[]</span> <span class="n">scan</span><span class="p">(</span><span class="n">ClassLoader</span> <span class="n">loader</span><span class="p">,</span> <span class="k">String</span> <span class="n">packageName</span><span class="p">)</span> <span class="n">throws</span> <span class="n">IOException</span> <span class="p">{</span>
        <span class="n">ResourcePatternResolver</span> <span class="n">resolver</span> <span class="p">=</span> <span class="n">new</span> <span class="n">PathMatchingResourcePatternResolver</span><span class="p">(</span><span class="n">loader</span><span class="p">);</span>
        <span class="k">String</span> <span class="n">pattern</span> <span class="p">=</span> <span class="s2">"classpath*:"</span> <span class="p">+</span> <span class="n">ClassUtils</span><span class="p">.</span><span class="n">convertClassNameToResourcePath</span><span class="p">(</span><span class="n">packageName</span><span class="p">)</span> <span class="p">+</span> <span class="s2">"/**/*.class"</span><span class="p">;</span>
        <span class="n">return</span> <span class="n">resolver</span><span class="p">.</span><span class="n">getResources</span><span class="p">(</span><span class="n">pattern</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="p">/**</span>
     <span class="p">*</span> <span class="err">加载</span> <span class="n">class</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">param</span> <span class="n">loader</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">param</span> <span class="n">resource</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">return</span>
     <span class="p">*/</span>
    <span class="n">private</span> <span class="n">Class</span><span class="p">&lt;?&gt;</span> <span class="n">loadClass</span><span class="p">(</span><span class="n">ClassLoader</span> <span class="n">loader</span><span class="p">,</span><span class="n">Resource</span> <span class="n">resource</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">try</span> <span class="p">{</span>
            <span class="n">CachingMetadataReaderFactory</span> <span class="n">metadataReaderFactory</span> <span class="p">=</span> <span class="n">new</span> <span class="n">CachingMetadataReaderFactory</span><span class="p">(</span><span class="n">loader</span><span class="p">);</span>
            <span class="n">MetadataReader</span> <span class="n">reader</span> <span class="p">=</span> <span class="n">metadataReaderFactory</span><span class="p">.</span><span class="n">getMetadataReader</span><span class="p">(</span><span class="n">resource</span><span class="p">);</span>
            <span class="n">return</span> <span class="n">ClassUtils</span><span class="p">.</span><span class="n">forName</span><span class="p">(</span><span class="n">reader</span><span class="p">.</span><span class="n">getClassMetadata</span><span class="p">().</span><span class="n">getClassName</span><span class="p">(),</span> <span class="n">loader</span><span class="p">);</span>
        <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">LinkageError</span> <span class="p">|</span> <span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
<span class="p">//</span>            <span class="k">if</span> <span class="p">(</span><span class="nb">log</span><span class="p">.</span><span class="n">isDebugEnabled</span><span class="p">())</span> <span class="p">{</span>
<span class="p">//</span>                <span class="nb">log</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">"Ignoring candidate class resource "</span> <span class="p">+</span> <span class="n">resource</span> <span class="p">+</span> <span class="s2">" due to "</span> <span class="p">+</span> <span class="n">e</span><span class="p">);</span>
<span class="p">//</span>            <span class="p">}</span>
            <span class="n">return</span> <span class="n">null</span><span class="p">;</span>
        <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">Throwable</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
<span class="p">//</span>            <span class="k">if</span> <span class="p">(</span><span class="nb">log</span><span class="p">.</span><span class="n">isWarnEnabled</span><span class="p">())</span> <span class="p">{</span>
<span class="p">//</span>                <span class="nb">log</span><span class="p">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">"Unexpected failure when loading class resource "</span> <span class="p">+</span> <span class="n">resource</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
<span class="p">//</span>            <span class="p">}</span>
            <span class="n">return</span> <span class="n">null</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="p">/**</span>
     <span class="p">*</span> <span class="n">resources</span> <span class="err">转换为</span> <span class="k">Set</span><span class="p">&lt;</span><span class="n">Class</span><span class="p">&gt;</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">param</span> <span class="n">loader</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">param</span> <span class="n">resources</span>
     <span class="p">*</span> <span class="p">@</span><span class="n">return</span>
     <span class="p">*/</span>
    <span class="n">private</span> <span class="k">Set</span><span class="p">&lt;</span><span class="n">Class</span><span class="p">&lt;?&gt;&gt;</span> <span class="n">convert</span><span class="p">(</span><span class="n">ClassLoader</span> <span class="n">loader</span><span class="p">,</span><span class="n">Resource</span><span class="p">[]</span> <span class="n">resources</span><span class="p">){</span>
        <span class="k">Set</span><span class="p">&lt;</span><span class="n">Class</span><span class="p">&lt;?&gt;&gt;</span> <span class="n">classSet</span> <span class="p">=</span> <span class="n">new</span> <span class="n">HashSet</span><span class="p">&lt;&gt;(</span><span class="n">resources</span><span class="p">.</span><span class="n">length</span><span class="p">);</span>
        <span class="n">for</span> <span class="p">(</span><span class="n">Resource</span> <span class="n">resource</span> <span class="p">:</span> <span class="n">resources</span><span class="p">){</span>
            <span class="n">Class</span><span class="p">&lt;?&gt;</span> <span class="n">clazz</span> <span class="p">=</span> <span class="n">loadClass</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">resource</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">clazz</span> <span class="c1">!= null){
</span>                <span class="n">classSet</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">clazz</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">return</span> <span class="n">classSet</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

    </div><a class="u-url" href="/java/2019/07/restful%E7%9A%84jersey%E5%92%8Cspringboot%E8%81%94%E7%B3%BB%E8%B5%B7%E6%9D%A5.html" hidden></a>
  </article>
</div>
    </div><div class="footer" style="text-align: center;">
    <span class="">蜀ICP备16031039号</span>
    <span class="">©️2019 Abearxiong</span>
</div><!--Bootstrap js-->
<script src="/assets/js/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://cdn.bootcss.com/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
<!-- Script -->
<script src="/assets/js/main.js"></script>

  </body>

</html>